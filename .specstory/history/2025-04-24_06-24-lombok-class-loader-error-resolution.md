<!-- Generated by SpecStory -->

# Lombok Class Loader Error Resolution (2025-04-24 14:24:04)

_**User**_

For the code present, we get this error:
```
Can't initialize javac processor due to (most likely) a class loader problem: java.lang.NoClassDefFoundError: Could not initialize class lombok.javac.Javac
  	at lombok.javac.apt.LombokProcessor.placePostCompileAndDontMakeForceRoundDummiesHook(LombokProcessor.java:174)
  	at lombok.javac.apt.LombokProcessor.init(LombokProcessor.java:96)
  	at lombok.core.AnnotationProcessor$JavacDescriptor.want(AnnotationProcessor.java:160)
  	at lombok.core.AnnotationProcessor.init(AnnotationProcessor.java:213)
  	at lombok.launch.AnnotationProcessorHider$AnnotationProcessor.init(AnnotationProcessor.java:64)
  	at org.netbeans.modules.java.source.indexing.APTUtils$ErrorToleratingProcessor.init(APTUtils.java:995)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment$ProcessorState.<init>(JavacProcessingEnvironment.java:623)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors$ProcessorStateIterator.next(JavacProcessingEnvironment.java:752)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:846)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$2200(JavacProcessingEnvironment.java:109)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1189)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1302)
  	at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1272)
  	at org.netbeans.lib.nbjavac.services.NBJavaCompiler.processAnnotations(NBJavaCompiler.java:64)
  	at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1174)
  	at com.sun.tools.javac.api.JavacTaskImpl.enter(JavacTaskImpl.java:348)
  	at com.sun.tools.javac.api.JavacTaskImpl.enter(JavacTaskImpl.java:282)
  	at org.netbeans.modules.java.source.parsing.JavacParser.moveToPhase(JavacParser.java:742)
  	at org.netbeans.modules.java.source.parsing.CompilationInfoImpl.toPhase(CompilationInfoImpl.java:426)
  	at org.netbeans.api.java.source.CompilationController.toPhase(CompilationController.java:90)
  	at org.netbeans.modules.editor.java.JavaStructureProvider.lambda$getStructure$0(JavaStructureProvider.java:61)
  	at org.netbeans.api.java.source.JavaSource$MultiTask.run(JavaSource.java:504)
  	at org.netbeans.modules.parsing.impl.TaskProcessor.callUserTask(TaskProcessor.java:586)
  	at org.netbeans.modules.parsing.api.ParserManager$UserTaskAction.run(ParserManager.java:197)
  	at org.netbeans.modules.parsing.api.ParserManager$UserTaskAction.run(ParserManager.java:180)
  	at org.netbeans.modules.parsing.impl.TaskProcessor$2.call(TaskProcessor.java:181)
  	at org.netbeans.modules.parsing.impl.TaskProcessor$2.call(TaskProcessor.java:178)
  	at org.netbeans.modules.masterfs.filebasedfs.utils.FileChangedManager.priorityIO(FileChangedManager.java:153)
  	at org.netbeans.modules.masterfs.providers.ProvidedExtensions.priorityIO(ProvidedExtensions.java:335)
  	at org.netbeans.modules.parsing.nb.DataObjectEnvFactory.runPriorityIO(DataObjectEnvFactory.java:118)
  	at org.netbeans.modules.parsing.impl.Utilities.runPriorityIO(Utilities.java:67)
  	at org.netbeans.modules.parsing.impl.TaskProcessor.runUserTask(TaskProcessor.java:178)
  	at org.netbeans.modules.parsing.api.ParserManager.parse(ParserManager.java:83)
  	at org.netbeans.api.java.source.JavaSource.runUserActionTaskImpl(JavaSource.java:454)
  	at org.netbeans.api.java.source.JavaSource.runUserActionTask(JavaSource.java:425)
  	at org.netbeans.modules.editor.java.JavaStructureProvider.getStructure(JavaStructureProvider.java:60)
  	at org.netbeans.modules.java.lsp.server.protocol.TextDocumentServiceImpl.lambda$documentSymbol$24(TextDocumentServiceImpl.java:1020)
  	at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1403)
  	at org.netbeans.modules.openide.util.GlobalLookup.execute(GlobalLookup.java:45)
  	at org.openide.util.lookup.Lookups.executeWith(Lookups.java:287)
  	at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:2018)
  Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.NoSuchFieldException: com.sun.tools.javac.code.TypeTag :: UNKNOWN [in thread "org.netbeans.modules.java.lsp.server.protocol.TextDocumentServiceImpl"]
  	at lombok.permit.Permit.getField(Permit.java:144)
  	at lombok.javac.JavacTreeMaker$SchroedingerType.getFieldCached(JavacTreeMaker.java:171)
  	at lombok.javac.JavacTreeMaker$TypeTag.typeTag(JavacTreeMaker.java:259)
  	at lombok.javac.Javac.<clinit>(Javac.java:186)
  	at lombok.javac.apt.LombokProcessor.placePostCompileAndDontMakeForceRoundDummiesHook(LombokProcessor.java:174)
  	at lombok.javac.apt.LombokProcessor.init(LombokProcessor.java:96)
  	at lombok.core.AnnotationProcessor$JavacDescriptor.want(AnnotationProcessor.java:160)
  	at lombok.core.AnnotationProcessor.init(AnnotationProcessor.java:213)
  	at lombok.launch.AnnotationProcessorHider$AnnotationProcessor.init(AnnotationProcessor.java:64)
  	at org.netbeans.modules.java.source.indexing.APTUtils$ErrorToleratingProcessor.init(APTUtils.java:995)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment$ProcessorState.<init>(JavacProcessingEnvironment.java:623)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors$ProcessorStateIterator.next(JavacProcessingEnvironment.java:752)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:846)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$2200(JavacProcessingEnvironment.java:109)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1189)
  	at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1302)
  	at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1272)
  	at org.netbeans.lib.nbjavac.services.NBJavaCompiler.processAnnotations(NBJavaCompiler.java:64)
  	at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1174)
  	at com.sun.tools.javac.api.JavacTaskImpl.enter(JavacTaskImpl.java:348)
  	at com.sun.tools.javac.api.JavacTaskImpl.enter(JavacTaskImpl.java:282)
  	at org.netbeans.modules.java.source.parsing.JavacParser.moveToPhase(JavacParser.java:742)
  	at org.netbeans.modules.java.source.parsing.CompilationInfoImpl.toPhase(CompilationInfoImpl.java:426)
  	at org.netbeans.api.java.source.CompilationController.toPhase(CompilationController.java:90)
  	at org.netbeans.modules.java.hints.infrastructure.JavaErrorProvider$1.run(JavaErrorProvider.java:108)
  	at org.netbeans.modules.parsing.impl.TaskProcessor.callUserTask(TaskProcessor.java:586)
  	at org.netbeans.modules.parsing.api.ParserManager$UserTaskAction.run(ParserManager.java:197)
  	at org.netbeans.modules.parsing.api.ParserManager$UserTaskAction.run(ParserManager.java:180)
  	at org.netbeans.modules.parsing.impl.TaskProcessor$2.call(TaskProcessor.java:181)
  	at org.netbeans.modules.parsing.impl.TaskProcessor$2.call(TaskProcessor.java:178)
  	at org.netbeans.modules.masterfs.filebasedfs.utils.FileChangedManager.priorityIO(FileChangedManager.java:153)
  	at org.netbeans.modules.masterfs.providers.ProvidedExtensions.priorityIO(ProvidedExtensions.java:335)
  	at org.netbeans.modules.parsing.nb.DataObjectEnvFactory.runPriorityIO(DataObjectEnvFactory.java:118)
  	at org.netbeans.modules.parsing.impl.Utilities.runPriorityIO(Utilities.java:67)
  	at org.netbeans.modules.parsing.impl.TaskProcessor.runUserTask(TaskProcessor.java:178)
  	at org.netbeans.modules.parsing.api.ParserManager.parse(ParserManager.java:83)
  	at org.netbeans.modules.java.hints.infrastructure.JavaErrorProvider.computeErrors(JavaErrorProvider.java:100)
  	at org.netbeans.modules.java.lsp.server.protocol.TextDocumentServiceImpl.lambda$computeDiags$49(TextDocumentServiceImpl.java:2208)
  	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:273)
  	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
  	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
  	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
  	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
  	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
  	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
  	at org.netbeans.modules.java.lsp.server.protocol.TextDocumentServiceImpl.computeDiags(TextDocumentServiceImpl.java:2213)
  	at org.netbeans.modules.java.lsp.server.protocol.TextDocumentServiceImpl.lambda$runDiagnosticTasks$46(TextDocumentServiceImpl.java:2106)
  	... 4 more
```
How can I resolve this? If you propose a fix, please make it concise.

---

_**Assistant**_

我来帮您解决这个问题。这是一个与Lombok相关的类加载错误，可能是由于Lombok版本与您的JDK版本不兼容导致的。

让我们查看一下项目的依赖配置：

---

<details>
            <summary>Searched codebase "pom.xml" • **5** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

让我检查一下pom.xml文件中Lombok的配置：

---

Read file: anime-social-platform/backend/pom.xml

---

看起来是Lombok版本与JDK版本不兼容的问题。您正在使用的是Lombok 1.18.30，它可能与您的开发环境不完全兼容。我们可以尝试以下解决方案：

1. 替换Lombok注解方案：

---

```diff
  package com.animesocial.platform.model.dto;
- 
- import lombok.Data;
  
  import jakarta.validation.constraints.NotBlank;
   * 3. 密码长度限制为6-20个字符
   */
- @Data
  public class LoginRequest {
      /** 用户名 */
      @Size(min = 6, max = 20, message = "密码长度应为6-20个字符")
      private String password;
+     
+     public String getUsername() {
+         return username;
+     }
+     
+     public void setUsername(String username) {
+         this.username = username;
+     }
+     
+     public String getPassword() {
+         return password;
+     }
+     
+     public void setPassword(String password) {
+         this.password = password;
+     }
+     
+     @Override
+     public boolean equals(Object o) {
+         if (this == o) return true;
+         if (o == null || getClass() != o.getClass()) return false;
+         
+         LoginRequest that = (LoginRequest) o;
+         
+         if (username != null ? !username.equals(that.username) : that.username != null) return false;
+         return password != null ? password.equals(that.password) : that.password == null;
+     }
+     
+     @Override
+     public int hashCode() {
+         int result = username != null ? username.hashCode() : 0;
+         result = 31 * result + (password != null ? password.hashCode() : 0);
+         return result;
+     }
+     
+     @Override
+     public String toString() {
+         return "LoginRequest{" +
+                 "username='" + username + '\'' +
+                 ", password='[PROTECTED]'" +
+                 '}';
+     }
  } 
```

---



---

